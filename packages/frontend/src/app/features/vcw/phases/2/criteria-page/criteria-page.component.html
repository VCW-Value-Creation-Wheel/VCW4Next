<div class="py-4 flex flex-row justify-between mx-4 md:mx-64 lg:mx-80">
    <h1 class="text-2xl font-bold text-primary">Criterias</h1>
</div>
<div class="flex flex-col gap-4 mx-4 md:mx-64 lg:mx-80">
    <ng-container *ngIf="dataFormArray.controls.length === 0 && !simpleInputOpen">
        <div class="py-2 px-2">
            <span class="italic">Start adding Criterias!</span>
        </div>
    </ng-container>
    <ng-container *ngFor="let Criteria of dataFormArray.controls; index as idx">
        <app-list-item
            [isEditable]="true"
            [isSelectable]="false"
            [value]="Criteria.controls.name?.value"
            (editClick)="editCriteria(idx)"
            (deleteClick)="deleteCriteria(idx, Criteria.controls.name, Criteria.controls.id)"
            [icon]="getIcon(Criteria.controls.sourceName)"
        ></app-list-item>
    </ng-container>
    <div [formGroup]="dataForm" *ngIf="simpleInputOpen" class="flex flex-row gap-2">
        <app-input class="w-8/12 md:w-7/12 lg:w-10/12"
            formControlName="name"
            placeholder="Type an Criteria..."
            (emitKeyPress)="onKeyPress($event)"></app-input>
        <div class="hidden md:flex md:flex-row md:justify-end">
            <app-button
                [label]="'Add'"
                [isTransparent]="true"
                [leftIcon]="faCheck"
                [isDisabled]="!dataForm.valid"
                (buttonClick)="onDirectAdd()"
            ></app-button>
            <app-button
                [label]="'Cancel'"
                [isTransparent]="true"
                [leftIcon]="faTimes"
                (buttonClick)="onCancel()"
            ></app-button>
            <app-button
                [label]="'Dialog'"
                [isTransparent]="true"
                [leftIcon]="faWindowMaximize"
                (buttonClick)="onOpenDialog()"
                ></app-button>
        </div>
        <div class="flex flex-row justify-end md:hidden">
            <app-icon-button
                [icon]="faCheck"
                (btnClick)="onDirectAdd()"
            ></app-icon-button>
            <app-icon-button
                [icon]="faTimes"
                (btnClick)="onCancel()"
            ></app-icon-button>
            <app-icon-button
                [icon]="faWindowMaximize"
                (btnClick)="onOpenDialog()"
            ></app-icon-button>
        </div>

    </div>
    <app-button
        (buttonClick)="onAddCriteria()"
        [label]="'New Criteria'"
        [leftIcon]="faPlus"
        *ngIf="!simpleInputOpen"
    ></app-button>
</div>
<app-create-item-dialog
    *ngIf="itemDialogOpen"
    [isEditing]="editCriteriaMode"
    [formGroup]="dataForm"
    [title]="editCriteriaMode ? 'Edit Criteria': 'New Criteria'"
    [tabs] = "['Manual', 'From File']"
    [tabFormControlsToExclude]="{'0': ['file', 'id'], '1': ['name', 'id']}"
    [fileFormFieldName]="'file'"
    [isAwaitingAction]="isLoading"
    (cancel)="onCancel()"
    (confirm)="onConfirm()"
></app-create-item-dialog>
<app-dialog
    *ngIf="confirmDialogOpen"
    [title]="actionConfirmTitle"
    [confirmText]="'Yes'"
    [cancelText]="'No'"
    (cancel)="onActionCancel()"
    (confirm)="onActionConfirm()"
>{{ actionConfirmText }}</app-dialog>
